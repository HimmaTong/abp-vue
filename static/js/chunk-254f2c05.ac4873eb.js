(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-254f2c05","chunk-2d23797f"],{"2dee":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-tabs",{model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"用户信息",name:"userinfo"}},[a("el-form",{ref:"from",attrs:{model:e.formData,rules:e.rules,"label-position":"top",size:"mini"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"userName",label:"用户名称"}},[a("el-input",{attrs:{size:"mini",clearable:""},model:{value:e.formData.userName,callback:function(t){e.$set(e.formData,"userName",t)},expression:"formData.userName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"surname",label:"姓"}},[a("el-input",{attrs:{size:"mini",clearable:""},model:{value:e.formData.surname,callback:function(t){e.$set(e.formData,"surname",t)},expression:"formData.surname"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"name",label:"名"}},[a("el-input",{attrs:{size:"mini",clearable:""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"password",label:"密码"}},[a("el-input",{attrs:{size:"mini",clearable:""},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password",t)},expression:"formData.password"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"email",label:"邮箱地址"}},[a("el-input",{attrs:{size:"mini",clearable:""},model:{value:e.formData.email,callback:function(t){e.$set(e.formData,"email",t)},expression:"formData.email"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"contractType",label:"手机号"}},[a("el-input",{attrs:{size:"mini",clearable:""},model:{value:e.formData.phoneNumber,callback:function(t){e.$set(e.formData,"phoneNumber",t)},expression:"formData.phoneNumber"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"lockoutEnabled",label:"登录失败,账户被锁定"}},[a("el-switch",{model:{value:e.formData.lockoutEnabled,callback:function(t){e.$set(e.formData,"lockoutEnabled",t)},expression:"formData.lockoutEnabled"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"twoFactorEnabled",label:"二次认证"}},[a("el-switch",{model:{value:e.formData.twoFactorEnabled,callback:function(t){e.$set(e.formData,"twoFactorEnabled",t)},expression:"formData.twoFactorEnabled"}})],1)],1)],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"角色",name:"roles"}},[a("el-form",{attrs:{size:"mini"}},[a("el-form-item",[a("el-checkbox-group",{model:{value:e.formData.roleNames,callback:function(t){e.$set(e.formData,"roleNames",t)},expression:"formData.roleNames"}},e._l(e.roles,(function(e,t){return a("el-checkbox",{key:t,attrs:{label:e.name,name:"role"}})})),1)],1)],1)],1),e._v(" "),a("el-divider"),e._v(" "),a("div",{staticClass:"from-footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)],1)},i=[],s=(a("7f7f"),a("96cf"),a("3b8d")),l=a("9744"),n=a("fab2"),o=a("fc7c"),u={name:"UserCreateOrEditForm",mixins:[l["a"]],props:{isCreate:{type:Boolean,default:!1},userId:{type:String,default:""},roles:{type:Array,default:function(){return[]}}},data:function(){return{activeTabName:"userinfo",formData:Object.assign({},o["viewModel"]),rules:o["rules"]}},watch:{userId:{immediate:!0,handler:function(){this.get()}}},methods:{get:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.userId){e.next=10;break}return o["rules"]["password"][0].required=!1,e.next=4,n["a"].get(this.userId);case 4:return t=e.sent,this.formData=Object.assign(this.formData,t),e.next=8,n["a"].getRoles(this.userId);case 8:a=e.sent,this.formData.roleNames=a.items.map((function(e){return e.name}));case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),submitForm:function(){var e=this;this.$refs.from.validate((function(t){if(!t)return!1;var a=null;a=e.isCreate?e.doPost():e.doPut(),a.then((function(){e.$message("提交成功"),e.$emit("successful"),e.formData=Object.assign({},o["viewModel"]),e.$refs.from.resetFields()}))}))},doPost:function(){return n["a"].post(this.formData)},doPut:function(){return n["a"].put(this.userId,this.formData)},cancel:function(){this.$emit("cancel")}}},c=u,m=a("2877"),d=Object(m["a"])(c,r,i,!1,null,null,null);t["default"]=d.exports},4468:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-full-container"},[a("div",{staticClass:"app-full-header"},[a("el-input",{staticClass:"header-item",attrs:{placeholder:"关键字",clearable:"",size:"mini"},model:{value:e.query.filter,callback:function(t){e.$set(e.query,"filter",t)},expression:"query.filter"}}),e._v(" "),a("el-button",{staticClass:"header-item-btn",attrs:{type:"primary",size:"mini"},on:{click:e.getList}},[e._v("搜索")]),e._v(" "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["AbpIdentity.Users.Create"],expression:"['AbpIdentity.Users.Create']"}],staticClass:"header-item-btn",attrs:{type:"success",size:"mini"},on:{click:e.create}},[e._v("新增")])],1),e._v(" "),a("div",{staticClass:"app-full-body"},[a("el-table",{attrs:{data:e.tableData,"default-sort":{prop:"creationTime",order:"descending"},"highlight-current-row":"",size:"small"},on:{"sort-change":e.onSortChange}},[a("el-table-column",{attrs:{prop:"userName",label:"姓名",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱地址",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phoneNumber",label:"手机号",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"creationTime",label:"创建时间",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("formatDate")(t.row.creationTime))+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{directives:[{name:"permission",rawName:"v-permission",value:["AbpIdentity.Users.Update"],expression:"['AbpIdentity.Users.Update']"}],attrs:{type:"primary",icon:"el-icon-edit",underline:!1},on:{click:function(a){return e.edit(t.row)}}}),e._v(" "),a("el-link",{directives:[{name:"permission",rawName:"v-permission",value:["AbpIdentity.Users.ManagePermissions"],expression:"['AbpIdentity.Users.ManagePermissions']"}],attrs:{type:"primary",icon:"el-icon-setting",underline:!1,title:"权限"},on:{click:function(a){return e.menuGrant(t.row)}}}),e._v(" "),a("el-popconfirm",{directives:[{name:"permission",rawName:"v-permission",value:["AbpIdentity.Users.Delete"],expression:"['AbpIdentity.Users.Delete']"}],attrs:{placement:"top",title:"确定删除此项？"},on:{onConfirm:function(a){return e.del(t.row)}}},[a("el-link",{attrs:{slot:"reference",type:"danger",underline:!1,icon:"el-icon-delete"},slot:"reference"})],1)]}}])})],1)],1),e._v(" "),a("div",{staticClass:"app-full-footer"},[a("pagination",{attrs:{total:e.pagination.totalCount,page:e.pagination.pageIndex,limit:e.query.maxResultCount},on:{"update:page":function(t){return e.$set(e.pagination,"pageIndex",t)},"update:limit":function(t){return e.$set(e.query,"maxResultCount",t)},pagination:e.onPagination}})],1),e._v(" "),a("CreateDialog",{attrs:{visible:e.createDialogVisible,"close-confirm":!0,roles:e.allRoles,"dialog-width":"500px"},on:{"update:visible":function(t){e.createDialogVisible=t},close:e.dialogClose}}),e._v(" "),a("EditDialog",{attrs:{visible:e.editDialogVisible,"user-id":e.editUserid,"close-confirm":!0,roles:e.allRoles,"dialog-width":"700px"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.dialogClose}}),e._v(" "),a("MenuGrant",{attrs:{visible:e.menuGrantDialogVisible,"close-confirm":!0,"provider-key":e.menuGrantUserId,"provider-name":"U",name:e.menuGrantUserName,"dialog-width":"700px"},on:{"update:visible":function(t){e.menuGrantDialogVisible=t},close:e.dialogClose}})],1)},i=[],s=(a("7f7f"),a("fd95")),l=a("fab2"),n=a("8988"),o=a("f11b"),u=a("8127"),c=a("78ef"),m=a("333d"),d={name:"Index",components:{CreateDialog:o["default"],EditDialog:u["default"],MenuGrant:c["a"],Pagination:m["a"]},mixins:[s["a"]],data:function(){return{createDialogVisible:!1,editDialogVisible:!1,menuGrantDialogVisible:!1,editUserid:"",menuGrantUserName:"",menuGrantUserId:"",allRoles:[],query:{filter:""}}},created:function(){this.getList(),this.getRoleAll()},methods:{getRoleAll:function(){var e=this;n["a"].getAll().then((function(t){e.allRoles=t.items}))},getList:function(){var e=this;l["a"].getList(this.query).then((function(t){e.tableData=t.items,e.updateTotalCount(t.totalCount)}))},create:function(){this.createDialogVisible=!0},edit:function(e){this.editUserid=e.id,this.editDialogVisible=!0},del:function(e){var t=this;l["a"].delete(e.id).then((function(){t.$message("删除成功"),t.getList()}))},menuGrant:function(e){this.menuGrantUserId=e.id,this.menuGrantUserName=e.name,this.menuGrantDialogVisible=!0},dialogClose:function(e){e&&this.getList(),this.editUserid=null,this.menuGrantUserId=null,this.menuGrantUserName=""}}},f=d,p=a("2877"),b=Object(p["a"])(f,r,i,!1,null,null,null);t["default"]=b.exports},8127:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"编辑用户",visible:e.dialogVisible,"before-close":e.beforeClose,width:e.dialogWidth},on:{close:e.closeDialog}},[a("user-create-or-edit-form",{attrs:{"user-id":e.userId,roles:e.roles},on:{cancel:e.onCancel,successful:e.onSuccessful}})],1)},i=[],s=a("2dee"),l=a("456d1"),n={name:"UserEditDialog",components:{UserCreateOrEditForm:s["default"]},mixins:[l["a"]],props:{userId:{type:String,default:""},roles:{type:Array,default:function(){return[]}}}},o=n,u=a("2877"),c=Object(u["a"])(o,r,i,!1,null,null,null);t["default"]=c.exports},f11b:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"新增用户",visible:e.dialogVisible,"before-close":e.beforeClose,width:e.dialogWidth},on:{close:e.closeDialog}},[a("user-create-or-edit-form",{attrs:{roles:e.roles,"is-create":!0},on:{cancel:e.onCancel,successful:e.onSuccessful}})],1)},i=[],s=a("2dee"),l=a("456d1"),n={name:"UserCreateDialog",components:{UserCreateOrEditForm:s["default"]},mixins:[l["a"]],props:{roles:{type:Array,default:function(){return[]}}}},o=n,u=a("2877"),c=Object(u["a"])(o,r,i,!1,null,null,null);t["default"]=c.exports},fc7c:function(e,t,a){"use strict";a.r(t),a.d(t,"viewModel",(function(){return r})),a.d(t,"rules",(function(){return i}));var r={userName:"",name:"",surname:"",password:"",email:"",phoneNumber:"",lockoutEnabled:!0,twoFactorEnabled:!0,roleNames:[]},i={userName:[{required:!0,message:"请输入用户名称",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"}]}}}]);