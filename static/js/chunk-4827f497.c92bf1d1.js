(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4827f497","chunk-c9aaae68","chunk-2d221d85"],{"0069":function(e,t){},2342:function(e,t,a){"use strict";var n=a("b775"),i={get:function(e){return Object(n["a"])({url:"/api/menus/".concat(e),method:"get"})},put:function(e,t){return Object(n["a"])({url:"/api/menus/".concat(e),method:"put",data:t})},delete:function(e){return Object(n["a"])({url:"/api/menus/".concat(e),method:"delete"})},getList:function(e){return Object(n["a"])({url:"/api/menus",method:"get",params:e})},post:function(e){return Object(n["a"])({url:"/api/menus",method:"post",data:e})},getAuthPolicies:function(){return Object(n["a"])({url:"/api/menus/auth-policies",method:"get"})}},r=i,s=a("0069");t["a"]=Object.assign(r,s)},"8b19":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{staticClass:"form-item",attrs:{filterable:"",placeholder:"请选择"},on:{change:e.onChange},model:{value:e.selVal,callback:function(t){e.selVal=t},expression:"selVal"}},e._l(e.options,(function(t){return a("el-option-group",{key:t.name,attrs:{label:t.displayName}},e._l(t.children,(function(e){return a("el-option",{key:e.name,attrs:{label:e.displayName+"("+e.name+")",value:e.name}})})),1)})),1)},i=[],r=(a("7f7f"),a("2342")),s={name:"PermissionSelector",props:{value:{type:String,default:""},filterGroup:{type:String,default:""}},data:function(){return{selVal:this.value,options:[]}},watch:{value:function(e){this.selVal=e}},created:function(){this.bindData()},methods:{bindData:function(){var e=this;r["a"].getAuthPolicies().then((function(t){e.filterGroup?e.options=t.filter((function(t){t.name,e.filterGroup})):e.options=t}))},onChange:function(e){this.$emit("update:value",e)}}},o=s,l=a("2877"),u=Object(l["a"])(o,n,i,!1,null,null,null);t["default"]=u.exports},9744:function(e,t,a){"use strict";var n={data:function(){return{labelWidth:120}},methods:{}};t["a"]=n},cba1:function(e,t,a){"use strict";a.r(t),a.d(t,"menuViewModel",(function(){return n})),a.d(t,"rules",(function(){return i})),a.d(t,"permissionViewModel",(function(){return r})),a.d(t,"permissionRules",(function(){return s}));var n={name:"",displayName:"",componentPath:"",routerPath:"",parentId:"",parentDisplayName:"",menuType:0,icon:"",sort:"",targetUrl:"",permissionKey:""},i={name:[{required:!0,message:"请输入 唯一标识",trigger:"blur"}],displayName:[{required:!0,message:"请输入显示名称",trigger:"blur"}],componentPath:[{required:!0,message:"请输入组件路径",trigger:"blur"}],routerPath:[{required:!0,message:"请输入路由路径",trigger:"blur"}],menuType:[{type:"integer",message:"menuType 必须为 integer",trigger:"change"}]},r={name:"",displayName:"",parentId:"",parentDisplayName:"",menuType:1,permissionKey:""},s={displayName:[{required:!0,message:"请输入 名称",trigger:"blur"}]}},d3f0:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-form",{ref:"from",attrs:{model:e.formData,rules:e.permissionRules,"label-width":"120px","label-position":"right",size:"mini"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"parentDisplayName",label:"上级菜单"}},[a("el-input",{staticClass:"form-item",attrs:{size:"mini",disabled:""},model:{value:e.formData.parentDisplayName,callback:function(t){e.$set(e.formData,"parentDisplayName",t)},expression:"formData.parentDisplayName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"displayName",label:"名称"}},[a("el-input",{staticClass:"form-item",attrs:{size:"mini",clearable:""},model:{value:e.formData.displayName,callback:function(t){e.$set(e.formData,"displayName",t)},expression:"formData.displayName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"permissionKey",label:"权限"}},[a("PermissionSelector",{attrs:{"filter-group":e.parentPermission,value:e.formData.permissionKey},on:{"update:value":function(t){return e.$set(e.formData,"permissionKey",t)}}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"from-footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)},i=[],r=a("9744"),s=a("2342"),o=a("cba1"),l=a("8b19"),u={name:"PermissionCreateOrEditForm",components:{PermissionSelector:l["default"]},mixins:[r["a"]],props:{isCreate:{type:Boolean,default:!1},menuId:{type:String,default:""},parentMenu:{type:Object,default:function(){return{}}}},data:function(){return{formData:Object.assign({},o["permissionViewModel"]),permissionRules:o["permissionRules"],parentPermission:""}},watch:{menuId:{immediate:!0,handler:function(){this.get()}},parentMenu:{deep:!0,immediate:!0,handler:function(e){var t=e.id,a=e.displayName;this.formData=Object.assign(this.formData,{parentId:t,parentDisplayName:a})}}},methods:{get:function(){var e=this;this.menuId&&s["a"].get(this.menuId).then((function(t){e.formData=Object.assign(e.formData,t)}))},submitForm:function(){var e=this;this.$refs.from.validate((function(t){if(!t)return!1;var a=null;a=e.isCreate?e.doPost():e.doPut(),a.then((function(){e.$message("提交成功"),e.$emit("successful"),e.formData=Object.assign({},o["permissionViewModel"]),e.$refs.from.resetFields()}))}))},doPost:function(){return s["a"].post(this.formData)},doPut:function(){return s["a"].put(this.menuId,this.formData)},cancel:function(){this.$refs.from.resetFields(),this.$emit("cancel")}}},m=u,c=a("2877"),p=Object(c["a"])(m,n,i,!1,null,null,null);t["default"]=p.exports}}]);