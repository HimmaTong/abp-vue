(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-315045a4","chunk-4827f497","chunk-c9aaae68","chunk-2d221d85"],{"0069":function(e,t){},2342:function(e,t,n){"use strict";var i=n("b775"),a={get:function(e){return Object(i["a"])({url:"/api/menus/".concat(e),method:"get"})},put:function(e,t){return Object(i["a"])({url:"/api/menus/".concat(e),method:"put",data:t})},delete:function(e){return Object(i["a"])({url:"/api/menus/".concat(e),method:"delete"})},getList:function(e){return Object(i["a"])({url:"/api/menus",method:"get",params:e})},post:function(e){return Object(i["a"])({url:"/api/menus",method:"post",data:e})},getAuthPolicies:function(){return Object(i["a"])({url:"/api/menus/auth-policies",method:"get"})}},r=a,s=n("0069");t["a"]=Object.assign(r,s)},"456d1":function(e,t,n){"use strict";var i={props:{visible:{type:Boolean,default:!1},closeConfirm:{type:Boolean,default:!1},dialogWidth:{type:String,default:"50%"}},data:function(){return{closeConfirmText:"确认关闭？"}},computed:{dialogVisible:function(){return this.visible}},methods:{beforeClose:function(e){this.closeConfirm?this.$confirm(this.closeConfirmText).then((function(){e()})).catch((function(){})):e()},updateVisible:function(e){this.$emit("update:visible",e)},closeDialog:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$emit("close",e),this.updateVisible(!1)},onSuccessful:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.closeDialog(e)},onCancel:function(){this.closeDialog()}}};t["a"]=i},7538:function(e,t,n){"use strict";var i=n("857c"),a=n.n(i);a.a},"857c":function(e,t,n){},"8b19":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-select",{staticClass:"form-item",attrs:{filterable:"",placeholder:"请选择"},on:{change:e.onChange},model:{value:e.selVal,callback:function(t){e.selVal=t},expression:"selVal"}},e._l(e.options,(function(t){return n("el-option-group",{key:t.name,attrs:{label:t.displayName}},e._l(t.children,(function(e){return n("el-option",{key:e.name,attrs:{label:e.displayName+"("+e.name+")",value:e.name}})})),1)})),1)},a=[],r=(n("7f7f"),n("2342")),s={name:"PermissionSelector",props:{value:{type:String,default:""},filterGroup:{type:String,default:""}},data:function(){return{selVal:this.value,options:[]}},watch:{value:function(e){this.selVal=e}},created:function(){this.bindData()},methods:{bindData:function(){var e=this;r["a"].getAuthPolicies().then((function(t){e.filterGroup?e.options=t.filter((function(t){t.name,e.filterGroup})):e.options=t}))},onChange:function(e){this.$emit("update:value",e)}}},o=s,l=n("2877"),u=Object(l["a"])(o,i,a,!1,null,null,null);t["default"]=u.exports},9744:function(e,t,n){"use strict";var i={data:function(){return{labelWidth:120}},methods:{}};t["a"]=i},b16a:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{staticClass:"dialog",attrs:{title:"创建权限",visible:e.dialogVisible,"before-close":e.beforeClose,width:e.dialogWidth},on:{close:e.closeDialog}},[e.dialogVisible?n("PermissionCreateOrEditForm",{attrs:{"parent-menu":e.parentMenu,"is-create":!0},on:{cancel:e.onCancel,successful:e.onSuccessful}}):e._e()],1)},a=[],r=n("d3f0"),s=n("456d1"),o={name:"PermissionCreateDialog",components:{PermissionCreateOrEditForm:r["default"]},mixins:[s["a"]],props:{parentMenu:{type:Object,default:function(){return{}}}}},l=o,u=(n("7538"),n("2877")),c=Object(u["a"])(l,i,a,!1,null,"fd606ba2",null);t["default"]=c.exports},cba1:function(e,t,n){"use strict";n.r(t),n.d(t,"menuViewModel",(function(){return i})),n.d(t,"rules",(function(){return a})),n.d(t,"permissionViewModel",(function(){return r})),n.d(t,"permissionRules",(function(){return s}));var i={name:"",displayName:"",componentPath:"",routerPath:"",parentId:"",parentDisplayName:"",menuType:0,icon:"",sort:"",targetUrl:"",permissionKey:""},a={name:[{required:!0,message:"请输入 唯一标识",trigger:"blur"}],displayName:[{required:!0,message:"请输入显示名称",trigger:"blur"}],componentPath:[{required:!0,message:"请输入组件路径",trigger:"blur"}],routerPath:[{required:!0,message:"请输入路由路径",trigger:"blur"}],menuType:[{type:"integer",message:"menuType 必须为 integer",trigger:"change"}]},r={name:"",displayName:"",parentId:"",parentDisplayName:"",menuType:1,permissionKey:""},s={displayName:[{required:!0,message:"请输入 名称",trigger:"blur"}]}},d3f0:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("el-form",{ref:"from",attrs:{model:e.formData,rules:e.permissionRules,"label-width":"120px","label-position":"right",size:"mini"}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{prop:"parentDisplayName",label:"上级菜单"}},[n("el-input",{staticClass:"form-item",attrs:{size:"mini",disabled:""},model:{value:e.formData.parentDisplayName,callback:function(t){e.$set(e.formData,"parentDisplayName",t)},expression:"formData.parentDisplayName"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{prop:"displayName",label:"名称"}},[n("el-input",{staticClass:"form-item",attrs:{size:"mini",clearable:""},model:{value:e.formData.displayName,callback:function(t){e.$set(e.formData,"displayName",t)},expression:"formData.displayName"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{prop:"permissionKey",label:"权限"}},[n("PermissionSelector",{attrs:{"filter-group":e.parentPermission,value:e.formData.permissionKey},on:{"update:value":function(t){return e.$set(e.formData,"permissionKey",t)}}})],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"from-footer"},[n("el-button",{attrs:{size:"mini"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)},a=[],r=n("9744"),s=n("2342"),o=n("cba1"),l=n("8b19"),u={name:"PermissionCreateOrEditForm",components:{PermissionSelector:l["default"]},mixins:[r["a"]],props:{isCreate:{type:Boolean,default:!1},menuId:{type:String,default:""},parentMenu:{type:Object,default:function(){return{}}}},data:function(){return{formData:Object.assign({},o["permissionViewModel"]),permissionRules:o["permissionRules"],parentPermission:""}},watch:{menuId:{immediate:!0,handler:function(){this.get()}},parentMenu:{deep:!0,immediate:!0,handler:function(e){var t=e.id,n=e.displayName;this.formData=Object.assign(this.formData,{parentId:t,parentDisplayName:n})}}},methods:{get:function(){var e=this;this.menuId&&s["a"].get(this.menuId).then((function(t){e.formData=Object.assign(e.formData,t)}))},submitForm:function(){var e=this;this.$refs.from.validate((function(t){if(!t)return!1;var n=null;n=e.isCreate?e.doPost():e.doPut(),n.then((function(){e.$message("提交成功"),e.$emit("successful"),e.formData=Object.assign({},o["permissionViewModel"]),e.$refs.from.resetFields()}))}))},doPost:function(){return s["a"].post(this.formData)},doPut:function(){return s["a"].put(this.menuId,this.formData)},cancel:function(){this.$refs.from.resetFields(),this.$emit("cancel")}}},c=u,m=n("2877"),f=Object(m["a"])(c,i,a,!1,null,null,null);t["default"]=f.exports}}]);