(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-473c0557","chunk-d2cd08fe","chunk-c9aaae68","chunk-2d221d85"],{"0069":function(e,t){},"1b65":function(e,t,a){"use strict";var n=a("e7e1"),i=a.n(n);i.a},2342:function(e,t,a){"use strict";var n=a("b775"),i={get:function(e){return Object(n["a"])({url:"/api/menus/".concat(e),method:"get"})},put:function(e,t){return Object(n["a"])({url:"/api/menus/".concat(e),method:"put",data:t})},delete:function(e){return Object(n["a"])({url:"/api/menus/".concat(e),method:"delete"})},getList:function(e){return Object(n["a"])({url:"/api/menus",method:"get",params:e})},post:function(e){return Object(n["a"])({url:"/api/menus",method:"post",data:e})},getAuthPolicies:function(){return Object(n["a"])({url:"/api/menus/auth-policies",method:"get"})}},r=i,o=a("0069");t["a"]=Object.assign(r,o)},"2ab5":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-form",{ref:"from",attrs:{model:e.formData,rules:e.rules,"label-width":"120px","label-position":"right",size:"mini"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"name",label:"唯一标识"}},[a("el-input",{staticClass:"form-item",attrs:{size:"mini",clearable:""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"displayName",label:"显示名称"}},[a("el-input",{staticClass:"form-item",attrs:{size:"mini",clearable:""},model:{value:e.formData.displayName,callback:function(t){e.$set(e.formData,"displayName",t)},expression:"formData.displayName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"componentPath",label:"组件路径"}},[a("el-input",{staticClass:"form-item",attrs:{size:"mini",clearable:""},model:{value:e.formData.componentPath,callback:function(t){e.$set(e.formData,"componentPath",t)},expression:"formData.componentPath"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"routerPath",label:"路由路径"}},[a("el-input",{staticClass:"form-item",attrs:{size:"mini",clearable:""},model:{value:e.formData.routerPath,callback:function(t){e.$set(e.formData,"routerPath",t)},expression:"formData.routerPath"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"parentId",label:"上级菜单"}},[a("el-popover",{attrs:{width:"500",trigger:"click"}},[a("CommonTreeSelector",{attrs:{"node-key":"id","default-checked-keys":[e.formData.parentId],data:e.allMenu,props:{label:"displayName"},height:300},on:{checkChange:e.onCheckChange}}),e._v(" "),a("el-input",{staticClass:"form-item",attrs:{slot:"reference",size:"mini",readonly:""},slot:"reference",model:{value:e.formData.parentDisplayName,callback:function(t){e.$set(e.formData,"parentDisplayName",t)},expression:"formData.parentDisplayName"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"icon",label:"icon"}},[a("el-input",{staticClass:"form-item",attrs:{size:"mini",clearable:""},model:{value:e.formData.icon,callback:function(t){e.$set(e.formData,"icon",t)},expression:"formData.icon"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"sort",label:"排序"}},[a("el-input",{staticClass:"form-item",attrs:{size:"mini",clearable:""},model:{value:e.formData.sort,callback:function(t){e.$set(e.formData,"sort",t)},expression:"formData.sort"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"permissionKey",label:"权限"}},[a("PermissionSelector",{attrs:{value:e.formData.permissionKey},on:{"update:value":function(t){return e.$set(e.formData,"permissionKey",t)}}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"from-footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)},i=[],r=a("9744"),o=a("2342"),s=a("cba1"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"tree-container",style:{height:e.height+"px"}},[a("section",{staticClass:"body"},[a("el-tree",{ref:"tree",attrs:{data:e.data,props:e.props,"default-checked-keys":e.defaultCheckedKeys,"expand-on-click-node":!1,"check-strictly":!0,"check-on-click-node":!0,"node-key":e.nodeKey,"show-checkbox":"","default-expand-all":""},on:{check:e.onNodeClick}})],1)])},c=[],u=(a("c5f6"),{name:"CommonTreeSelector",props:{data:{type:Array,default:function(){return[]}},nodeKey:{type:String,default:"id"},multiple:{type:Boolean,default:!1},props:{type:Object,default:function(){return{children:"children",label:"label",disabled:"disabled"}}},defaultCheckedKeys:{type:Array,default:function(){return[]}},height:{type:Number,default:200}},data:function(){return{}},methods:{onNodeClick:function(e){var t=this.$refs["tree"],a=t.getCheckedKeys();a.length>1&&!this.multiple&&(t.setCheckedKeys([]),t.setChecked(e,!0,!1)),this.$emit("checkChange",t.getCheckedNodes())},onClick:function(){var e=this.$refs["tree"],t=e.getCheckedKeys();this.$emit("Changed",t)}}}),m=u,f=(a("1b65"),a("2877")),d=Object(f["a"])(m,l,c,!1,null,"0b4c8a99",null),p=d.exports,h=a("8b19"),b={name:"MenuCreateOrEditForm",components:{CommonTreeSelector:p,PermissionSelector:h["default"]},mixins:[r["a"]],props:{isCreate:{type:Boolean,default:!1},menuId:{type:String,default:""}},data:function(){return{allMenu:[],formData:Object.assign({},s["menuViewModel"]),rules:s["rules"]}},watch:{menuId:{immediate:!0,handler:function(){this.get()}}},created:function(){this.bindData()},methods:{get:function(){var e=this;this.menuId&&o["a"].get(this.menuId).then((function(t){e.formData=Object.assign(e.formData,t)}))},bindData:function(){var e=this;o["a"].getList({type:0}).then((function(t){e.allMenu=t.items}))},submitForm:function(){var e=this;this.$refs.from.validate((function(t){if(!t)return!1;var a=null;a=e.isCreate?e.doPost():e.doPut(),a.then((function(){e.$message("提交成功"),e.$emit("successful"),e.formData=Object.assign({},s["menuViewModel"]),e.$refs.from.resetFields()}))}))},doPost:function(){return o["a"].post(this.formData)},doPut:function(){return o["a"].put(this.menuId,this.formData)},cancel:function(){this.$refs.from.resetFields(),this.$emit("cancel")},onCheckChange:function(e){if(0===e.length)this.formData.parentId=null,this.formData.parentDisplayName=null;else{if(e[0].id===this.formData.id)return void this.$message({message:"不能选择自己作为上级菜单",type:"warning"});this.formData.parentId=e[0].id,this.formData.parentDisplayName=e[0].displayName}}}},g=b,y=Object(f["a"])(g,n,i,!1,null,null,null);t["default"]=y.exports},"456d1":function(e,t,a){"use strict";var n={props:{visible:{type:Boolean,default:!1},closeConfirm:{type:Boolean,default:!1},dialogWidth:{type:String,default:"50%"}},data:function(){return{closeConfirmText:"确认关闭？"}},computed:{dialogVisible:function(){return this.visible}},methods:{beforeClose:function(e){this.closeConfirm?this.$confirm(this.closeConfirmText).then((function(){e()})).catch((function(){})):e()},updateVisible:function(e){this.$emit("update:visible",e)},closeDialog:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$emit("close",e),this.updateVisible(!1)},onSuccessful:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.closeDialog(e)},onCancel:function(){this.closeDialog()}}};t["a"]=n},"70b5":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"编辑菜单",visible:e.dialogVisible,"before-close":e.beforeClose,width:e.dialogWidth},on:{close:e.closeDialog}},[e.dialogVisible?a("MenuCreateOrEditForm",{attrs:{"menu-id":e.menuId},on:{cancel:e.onCancel,successful:e.onSuccessful}}):e._e()],1)},i=[],r=a("2ab5"),o=a("456d1"),s={name:"MenuEditDialog",components:{MenuCreateOrEditForm:r["default"]},mixins:[o["a"]],props:{menuId:{type:String,default:""}}},l=s,c=a("2877"),u=Object(c["a"])(l,n,i,!1,null,null,null);t["default"]=u.exports},"8b19":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{staticClass:"form-item",attrs:{filterable:"",placeholder:"请选择"},on:{change:e.onChange},model:{value:e.selVal,callback:function(t){e.selVal=t},expression:"selVal"}},e._l(e.options,(function(t){return a("el-option-group",{key:t.name,attrs:{label:t.displayName}},e._l(t.children,(function(e){return a("el-option",{key:e.name,attrs:{label:e.displayName+"("+e.name+")",value:e.name}})})),1)})),1)},i=[],r=(a("7f7f"),a("2342")),o={name:"PermissionSelector",props:{value:{type:String,default:""},filterGroup:{type:String,default:""}},data:function(){return{selVal:this.value,options:[]}},watch:{value:function(e){this.selVal=e}},created:function(){this.bindData()},methods:{bindData:function(){var e=this;r["a"].getAuthPolicies().then((function(t){e.filterGroup?e.options=t.filter((function(t){t.name,e.filterGroup})):e.options=t}))},onChange:function(e){this.$emit("update:value",e)}}},s=o,l=a("2877"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},9744:function(e,t,a){"use strict";var n={data:function(){return{labelWidth:120}},methods:{}};t["a"]=n},cba1:function(e,t,a){"use strict";a.r(t),a.d(t,"menuViewModel",(function(){return n})),a.d(t,"rules",(function(){return i})),a.d(t,"permissionViewModel",(function(){return r})),a.d(t,"permissionRules",(function(){return o}));var n={name:"",displayName:"",componentPath:"",routerPath:"",parentId:"",parentDisplayName:"",menuType:0,icon:"",sort:"",targetUrl:"",permissionKey:""},i={name:[{required:!0,message:"请输入 唯一标识",trigger:"blur"}],displayName:[{required:!0,message:"请输入显示名称",trigger:"blur"}],componentPath:[{required:!0,message:"请输入组件路径",trigger:"blur"}],routerPath:[{required:!0,message:"请输入路由路径",trigger:"blur"}],menuType:[{type:"integer",message:"menuType 必须为 integer",trigger:"change"}]},r={name:"",displayName:"",parentId:"",parentDisplayName:"",menuType:1,permissionKey:""},o={displayName:[{required:!0,message:"请输入 名称",trigger:"blur"}]}},e7e1:function(e,t,a){}}]);