(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4cf1db58","chunk-4827f497","chunk-c9aaae68","chunk-2d221d85"],{"0069":function(e,t){},2342:function(e,t,i){"use strict";var n=i("b775"),a={get:function(e){return Object(n["a"])({url:"/api/menus/".concat(e),method:"get"})},put:function(e,t){return Object(n["a"])({url:"/api/menus/".concat(e),method:"put",data:t})},delete:function(e){return Object(n["a"])({url:"/api/menus/".concat(e),method:"delete"})},getList:function(e){return Object(n["a"])({url:"/api/menus",method:"get",params:e})},post:function(e){return Object(n["a"])({url:"/api/menus",method:"post",data:e})},getAuthPolicies:function(){return Object(n["a"])({url:"/api/menus/auth-policies",method:"get"})}},r=a,s=i("0069");t["a"]=Object.assign(r,s)},2821:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"编辑权限",visible:e.dialogVisible,"before-close":e.beforeClose,width:e.dialogWidth},on:{close:e.closeDialog}},[e.dialogVisible?i("PermissionCreateOrEditForm",{attrs:{"menu-id":e.menuId},on:{cancel:e.onCancel,successful:e.onSuccessful}}):e._e()],1)},a=[],r=i("d3f0"),s=i("456d1"),o={name:"PermissionEditDialog",components:{PermissionCreateOrEditForm:r["default"]},mixins:[s["a"]],props:{menuId:{type:String,default:""}}},l=o,u=i("2877"),c=Object(u["a"])(l,n,a,!1,null,null,null);t["default"]=c.exports},"456d1":function(e,t,i){"use strict";var n={props:{visible:{type:Boolean,default:!1},closeConfirm:{type:Boolean,default:!1},dialogWidth:{type:String,default:"50%"}},data:function(){return{closeConfirmText:"确认关闭？"}},computed:{dialogVisible:function(){return this.visible}},methods:{beforeClose:function(e){this.closeConfirm?this.$confirm(this.closeConfirmText).then((function(){e()})).catch((function(){})):e()},updateVisible:function(e){this.$emit("update:visible",e)},closeDialog:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$emit("close",e),this.updateVisible(!1)},onSuccessful:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.closeDialog(e)},onCancel:function(){this.closeDialog()}}};t["a"]=n},"8b19":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-select",{staticClass:"form-item",attrs:{filterable:"",placeholder:"请选择"},on:{change:e.onChange},model:{value:e.selVal,callback:function(t){e.selVal=t},expression:"selVal"}},e._l(e.options,(function(t){return i("el-option-group",{key:t.name,attrs:{label:t.displayName}},e._l(t.children,(function(e){return i("el-option",{key:e.name,attrs:{label:e.displayName+"("+e.name+")",value:e.name}})})),1)})),1)},a=[],r=(i("7f7f"),i("2342")),s={name:"PermissionSelector",props:{value:{type:String,default:""},filterGroup:{type:String,default:""}},data:function(){return{selVal:this.value,options:[]}},watch:{value:function(e){this.selVal=e}},created:function(){this.bindData()},methods:{bindData:function(){var e=this;r["a"].getAuthPolicies().then((function(t){e.filterGroup?e.options=t.filter((function(t){t.name,e.filterGroup})):e.options=t}))},onChange:function(e){this.$emit("update:value",e)}}},o=s,l=i("2877"),u=Object(l["a"])(o,n,a,!1,null,null,null);t["default"]=u.exports},9744:function(e,t,i){"use strict";var n={data:function(){return{labelWidth:120}},methods:{}};t["a"]=n},cba1:function(e,t,i){"use strict";i.r(t),i.d(t,"menuViewModel",(function(){return n})),i.d(t,"rules",(function(){return a})),i.d(t,"permissionViewModel",(function(){return r})),i.d(t,"permissionRules",(function(){return s}));var n={name:"",displayName:"",componentPath:"",routerPath:"",parentId:"",parentDisplayName:"",menuType:0,icon:"",sort:"",targetUrl:"",permissionKey:""},a={name:[{required:!0,message:"请输入 唯一标识",trigger:"blur"}],displayName:[{required:!0,message:"请输入显示名称",trigger:"blur"}],componentPath:[{required:!0,message:"请输入组件路径",trigger:"blur"}],routerPath:[{required:!0,message:"请输入路由路径",trigger:"blur"}],menuType:[{type:"integer",message:"menuType 必须为 integer",trigger:"change"}]},r={name:"",displayName:"",parentId:"",parentDisplayName:"",menuType:1,permissionKey:""},s={displayName:[{required:!0,message:"请输入 名称",trigger:"blur"}]}},d3f0:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",[i("el-form",{ref:"from",attrs:{model:e.formData,rules:e.permissionRules,"label-width":"120px","label-position":"right",size:"mini"}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{prop:"parentDisplayName",label:"上级菜单"}},[i("el-input",{staticClass:"form-item",attrs:{size:"mini",disabled:""},model:{value:e.formData.parentDisplayName,callback:function(t){e.$set(e.formData,"parentDisplayName",t)},expression:"formData.parentDisplayName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{prop:"displayName",label:"名称"}},[i("el-input",{staticClass:"form-item",attrs:{size:"mini",clearable:""},model:{value:e.formData.displayName,callback:function(t){e.$set(e.formData,"displayName",t)},expression:"formData.displayName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{prop:"permissionKey",label:"权限"}},[i("PermissionSelector",{attrs:{"filter-group":e.parentPermission,value:e.formData.permissionKey},on:{"update:value":function(t){return e.$set(e.formData,"permissionKey",t)}}})],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"from-footer"},[i("el-button",{attrs:{size:"mini"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)},a=[],r=i("9744"),s=i("2342"),o=i("cba1"),l=i("8b19"),u={name:"PermissionCreateOrEditForm",components:{PermissionSelector:l["default"]},mixins:[r["a"]],props:{isCreate:{type:Boolean,default:!1},menuId:{type:String,default:""},parentMenu:{type:Object,default:function(){return{}}}},data:function(){return{formData:Object.assign({},o["permissionViewModel"]),permissionRules:o["permissionRules"],parentPermission:""}},watch:{menuId:{immediate:!0,handler:function(){this.get()}},parentMenu:{deep:!0,immediate:!0,handler:function(e){var t=e.id,i=e.displayName;this.formData=Object.assign(this.formData,{parentId:t,parentDisplayName:i})}}},methods:{get:function(){var e=this;this.menuId&&s["a"].get(this.menuId).then((function(t){e.formData=Object.assign(e.formData,t)}))},submitForm:function(){var e=this;this.$refs.from.validate((function(t){if(!t)return!1;var i=null;i=e.isCreate?e.doPost():e.doPut(),i.then((function(){e.$message("提交成功"),e.$emit("successful"),e.formData=Object.assign({},o["permissionViewModel"]),e.$refs.from.resetFields()}))}))},doPost:function(){return s["a"].post(this.formData)},doPut:function(){return s["a"].put(this.menuId,this.formData)},cancel:function(){this.$refs.from.resetFields(),this.$emit("cancel")}}},c=u,m=i("2877"),f=Object(m["a"])(c,n,a,!1,null,null,null);t["default"]=f.exports}}]);