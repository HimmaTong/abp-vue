(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-052dfffa","chunk-05490613","chunk-2d23797f"],{"2dee":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-tabs",{model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"用户信息",name:"userinfo"}},[a("el-form",{ref:"from",attrs:{model:e.formData,rules:e.rules,"label-position":"top",size:"mini"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"userName",label:"用户名称"}},[a("el-input",{attrs:{size:"mini",clearable:""},model:{value:e.formData.userName,callback:function(t){e.$set(e.formData,"userName",t)},expression:"formData.userName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"surname",label:"姓"}},[a("el-input",{attrs:{size:"mini",clearable:""},model:{value:e.formData.surname,callback:function(t){e.$set(e.formData,"surname",t)},expression:"formData.surname"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"name",label:"名"}},[a("el-input",{attrs:{size:"mini",clearable:""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"password",label:"密码"}},[a("el-input",{attrs:{size:"mini",clearable:""},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password",t)},expression:"formData.password"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"email",label:"邮箱地址"}},[a("el-input",{attrs:{size:"mini",clearable:""},model:{value:e.formData.email,callback:function(t){e.$set(e.formData,"email",t)},expression:"formData.email"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"contractType",label:"手机号"}},[a("el-input",{attrs:{size:"mini",clearable:""},model:{value:e.formData.phoneNumber,callback:function(t){e.$set(e.formData,"phoneNumber",t)},expression:"formData.phoneNumber"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"lockoutEnabled",label:"登录失败,账户被锁定"}},[a("el-switch",{model:{value:e.formData.lockoutEnabled,callback:function(t){e.$set(e.formData,"lockoutEnabled",t)},expression:"formData.lockoutEnabled"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"twoFactorEnabled",label:"二次认证"}},[a("el-switch",{model:{value:e.formData.twoFactorEnabled,callback:function(t){e.$set(e.formData,"twoFactorEnabled",t)},expression:"formData.twoFactorEnabled"}})],1)],1)],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"角色",name:"roles"}},[a("el-form",{attrs:{size:"mini"}},[a("el-form-item",[a("el-checkbox-group",{model:{value:e.formData.roleNames,callback:function(t){e.$set(e.formData,"roleNames",t)},expression:"formData.roleNames"}},e._l(e.roles,(function(e,t){return a("el-checkbox",{key:t,attrs:{label:e.name,name:"role"}})})),1)],1)],1)],1),e._v(" "),a("el-divider"),e._v(" "),a("div",{staticClass:"from-footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)],1)},o=[],s=(a("7f7f"),a("96cf"),a("3b8d")),l=a("9744"),n=a("fab2"),i=a("fc7c"),u={name:"UserCreateOrEditForm",mixins:[l["a"]],props:{isCreate:{type:Boolean,default:!1},userId:{type:String,default:""},roles:{type:Array,default:function(){return[]}}},data:function(){return{activeTabName:"userinfo",formData:Object.assign({},i["viewModel"]),rules:i["rules"]}},watch:{userId:{immediate:!0,handler:function(){this.get()}}},methods:{get:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.userId){e.next=10;break}return i["rules"]["password"][0].required=!1,e.next=4,n["a"].get(this.userId);case 4:return t=e.sent,this.formData=Object.assign(this.formData,t),e.next=8,n["a"].getRoles(this.userId);case 8:a=e.sent,this.formData.roleNames=a.items.map((function(e){return e.name}));case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),submitForm:function(){var e=this;this.$refs.from.validate((function(t){if(!t)return!1;var a=null;a=e.isCreate?e.doPost():e.doPut(),a.then((function(){e.$message("提交成功"),e.$emit("successful"),e.formData=Object.assign({},i["viewModel"]),e.$refs.from.resetFields()}))}))},doPost:function(){return n["a"].post(this.formData)},doPut:function(){return n["a"].put(this.userId,this.formData)},cancel:function(){this.$emit("cancel")}}},c=u,m=a("2877"),f=Object(m["a"])(c,r,o,!1,null,null,null);t["default"]=f.exports},"456d1":function(e,t,a){"use strict";var r={props:{visible:{type:Boolean,default:!1},closeConfirm:{type:Boolean,default:!1},dialogWidth:{type:String,default:"50%"}},data:function(){return{closeConfirmText:"确认关闭？"}},computed:{dialogVisible:function(){return this.visible}},methods:{beforeClose:function(e){this.closeConfirm?this.$confirm(this.closeConfirmText).then((function(){e()})).catch((function(){})):e()},updateVisible:function(e){this.$emit("update:visible",e)},closeDialog:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$emit("close",e),this.updateVisible(!1)},onSuccessful:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.closeDialog(e)},onCancel:function(){this.closeDialog()}}};t["a"]=r},8127:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"编辑用户",visible:e.dialogVisible,"before-close":e.beforeClose,width:e.dialogWidth},on:{close:e.closeDialog}},[a("user-create-or-edit-form",{attrs:{"user-id":e.userId,roles:e.roles},on:{cancel:e.onCancel,successful:e.onSuccessful}})],1)},o=[],s=a("2dee"),l=a("456d1"),n={name:"UserEditDialog",components:{UserCreateOrEditForm:s["default"]},mixins:[l["a"]],props:{userId:{type:String,default:""},roles:{type:Array,default:function(){return[]}}}},i=n,u=a("2877"),c=Object(u["a"])(i,r,o,!1,null,null,null);t["default"]=c.exports},9744:function(e,t,a){"use strict";var r={data:function(){return{labelWidth:120}},methods:{}};t["a"]=r},fc7c:function(e,t,a){"use strict";a.r(t),a.d(t,"viewModel",(function(){return r})),a.d(t,"rules",(function(){return o}));var r={userName:"",name:"",surname:"",password:"",email:"",phoneNumber:"",lockoutEnabled:!0,twoFactorEnabled:!0,roleNames:[]},o={userName:[{required:!0,message:"请输入用户名称",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"}]}}}]);