(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-370edc46"],{"0069":function(e,t){},2342:function(e,t,n){"use strict";var i=n("b775"),r={get:function(e){return Object(i["a"])({url:"/api/menus/".concat(e),method:"get"})},put:function(e,t){return Object(i["a"])({url:"/api/menus/".concat(e),method:"put",data:t})},delete:function(e){return Object(i["a"])({url:"/api/menus/".concat(e),method:"delete"})},getList:function(e){return Object(i["a"])({url:"/api/menus",method:"get",params:e})},post:function(e){return Object(i["a"])({url:"/api/menus",method:"post",data:e})},getAuthPolicies:function(){return Object(i["a"])({url:"/api/menus/auth-policies",method:"get"})}},a=r,o=n("0069");t["a"]=Object.assign(a,o)},"333d":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[n("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},r=[];n("c5f6");Math.easeInOutQuad=function(e,t,n,i){return e/=i/2,e<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)};var a=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function o(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function c(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function u(e,t,n){var i=c(),r=e-i,u=20,s=0;t="undefined"===typeof t?500:t;var l=function e(){s+=u;var c=Math.easeInOutQuad(s,i,r,t);o(c),s<t?a(e):n&&"function"===typeof n&&n()};l()}var s={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&u(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&u(0,800)}}},l=s,d=(n("6caf"),n("2877")),f=Object(d["a"])(l,i,r,!1,null,"96a795e6",null);t["a"]=f.exports},"456d1":function(e,t,n){"use strict";var i={props:{visible:{type:Boolean,default:!1},closeConfirm:{type:Boolean,default:!1},dialogWidth:{type:String,default:"50%"}},data:function(){return{closeConfirmText:"确认关闭？"}},computed:{dialogVisible:function(){return this.visible}},methods:{beforeClose:function(e){this.closeConfirm?this.$confirm(this.closeConfirmText).then((function(){e()})).catch((function(){})):e()},updateVisible:function(e){this.$emit("update:visible",e)},closeDialog:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$emit("close",e),this.updateVisible(!1)},onSuccessful:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.closeDialog(e)},onCancel:function(){this.closeDialog()}}};t["a"]=i},"5df3":function(e,t,n){"use strict";var i=n("02f4")(!0);n("01f9")(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})}))},"67ab":function(e,t,n){var i=n("ca5a")("meta"),r=n("d3f4"),a=n("69a8"),o=n("86cc").f,c=0,u=Object.isExtensible||function(){return!0},s=!n("79e5")((function(){return u(Object.preventExtensions({}))})),l=function(e){o(e,i,{value:{i:"O"+ ++c,w:{}}})},d=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,i)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[i].i},f=function(e,t){if(!a(e,i)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[i].w},h=function(e){return s&&p.NEED&&u(e)&&!a(e,i)&&l(e),e},p=e.exports={KEY:i,NEED:!1,fastKey:d,getWeak:f,onFreeze:h}},"6caf":function(e,t,n){"use strict";var i=n("d8bc"),r=n.n(i);r.a},"78ef":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"权限 - "+e.name,visible:e.dialogVisible,"before-close":e.beforeClose,width:e.dialogWidth},on:{close:e.closeDialog}},[e.dialogVisible?n("MenuGrantForm",{attrs:{"provider-key":e.providerKey,"provider-name":e.providerName},on:{cancel:e.onCancel,successful:e.onSuccessful}}):e._e()],1)},r=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.grantAll,callback:function(t){e.grantAll=t},expression:"grantAll"}},[e._v("授予所有权限")]),e._v(" "),n("el-divider"),e._v(" "),n("el-tree",{ref:"tree",attrs:{"show-checkbox":"","default-expand-all":"","node-key":"id",data:e.treeData,"expand-on-click-node":!1,"check-strictly":!0,"check-on-click-node":!0,"default-checked-keys":e.checkedMenus,props:e.defaultProps},on:{"check-change":e.onCheckChange},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,r=t.data;return n("span",{staticClass:"custom-tree-node"},[n("span",[e._v("\n        "+e._s(i.label)+"\n        "),e.enableDisableFeature?n("span",[e._v("\n          "+e._s(r.grantedProviders&&r.grantedProviders.length>0?"("+r.grantedProviders[0].name+")":"")+"\n        ")]):e._e()])])}}])}),e._v(" "),n("el-divider"),e._v(" "),n("div",{staticClass:"from-footer"},[n("el-button",{attrs:{size:"mini"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)},o=[],c=(n("7f7f"),n("96cf"),n("3b8d")),u=(n("ac6a"),n("2342")),s=n("23fc"),l={name:"MenuGrantForm",props:{providerKey:{type:String,default:""},providerName:{type:String,default:""}},data:function(){return{grantAll:!1,isIndeterminate:!0,treeData:[],allMenuIds:[],checkedMenus:[],defaultProps:{children:"children",label:"displayName"}}},computed:{enableDisableFeature:function(){return"U"===this.providerName}},watch:{providerKey:{immediate:!0,handler:function(){this.bindData()}}},methods:{handleCheckAllChange:function(e){var t=this;if(e)this.allMenuIds.forEach((function(e){t.setChecked(e,!0,!1)}));else{var n=this.$refs["tree"].getCheckedKeys();n.forEach((function(e){t.setChecked(e,!1,!1)}))}this.isIndeterminate=!1},bindData:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.providerKey){e.next=5;break}return e.next=3,u["a"].getList();case 3:t=e.sent.items,s["a"].get({providerName:this.providerName,providerKey:this.providerKey}).then((function(e){e.menuGrants.forEach((function(e){n.allMenuIds.push(e.id),e.isGranted&&n.checkedMenus.push(e.id)})),n.$refs["tree"].setCheckedKeys(n.checkedMenus),n.initTreeData(t,e.menuGrants)}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),cancel:function(){this.$emit("cancel")},submitForm:function(){var e=this,t=[];this.flattenData(t,this.treeData);var n=this.$refs["tree"].getCheckedKeys();t.forEach((function(e){e.isGranted=n.indexOf(e.id)>-1})),s["a"].put({providerName:this.providerName,providerKey:this.providerKey},{menus:t}).then((function(){e.$message("提交成功"),e.$emit("successful")}))},initTreeData:function(e,t){var n=this;e.forEach((function(e){if(n.enableDisableFeature){var i=t.filter((function(t){return t.id==e.id}));if(i.length>0){var r=i[0].grantedProviders,a=0!==r.length;r.forEach((function(e){"U"===e.name&&(a=!1)})),e["disabled"]=a,e["grantedProviders"]=r}}n.initChildren(e.children,t)})),this.treeData=e},initChildren:function(e,t){var n=this;e.forEach((function(e){if(n.enableDisableFeature){var i=t.filter((function(t){return t.id==e.id}));if(i.length>0){var r=i[0].grantedProviders,a=0!==r.length;r.forEach((function(e){"U"===e.name&&(a=!1)})),e["disabled"]=a,e["grantedProviders"]=i[0].grantedProviders}}n.initChildren(e.children,t)}))},flattenData:function(e,t){for(var n=0;n<t.length;n++){var i=t[n];e.push({id:i.id,permissionKey:i.permissionKey,isGranted:!1}),this.flattenData(e,i.children)}},onCheckChange:function(e,t){var n=this;t&&e.parentId?this.setChecked(e.parentId,!0):!t&&e.children.length>0&&e.children.forEach((function(e){n.setChecked(e.id,!1)}));var i=this.$refs["tree"].getCheckedKeys().length;this.grantAll=i===this.allMenuIds.length,this.isIndeterminate=i>0&&i<this.allMenuIds.length},setChecked:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.$refs["tree"],r=i.getNode(e);!0!==r.disabled&&this.$refs["tree"].setChecked(e,t,n)}}},d=l,f=(n("8147"),n("2877")),h=Object(f["a"])(d,a,o,!1,null,"3717553e",null),p=h.exports,g=n("456d1"),v={name:"PermissionGrant",components:{MenuGrantForm:p},mixins:[g["a"]],props:{providerKey:{type:String,default:""},providerName:{type:String,default:""},name:{type:String,default:""}}},m=v,b=Object(f["a"])(m,i,r,!1,null,null,null);t["a"]=b.exports},8147:function(e,t,n){"use strict";var i=n("ecd9"),r=n.n(i);r.a},"84d8":function(e,t){},8988:function(e,t,n){"use strict";var i=n("b775"),r={getAll:function(){return Object(i["a"])({url:"/api/identity/roles/all",method:"get"})},getList:function(e){return Object(i["a"])({url:"/api/identity/roles",method:"get",params:e})},post:function(e){return Object(i["a"])({url:"/api/identity/roles",method:"post",data:e})},get:function(e){return Object(i["a"])({url:"/api/identity/roles/".concat(e),method:"get"})},put:function(e,t){return Object(i["a"])({url:"/api/identity/roles/".concat(e),method:"put",data:t})},delete:function(e){return Object(i["a"])({url:"/api/identity/roles/".concat(e),method:"delete"})}},a=r,o=n("84d8");t["a"]=Object.assign(a,o)},9744:function(e,t,n){"use strict";var i={data:function(){return{labelWidth:120}},methods:{}};t["a"]=i},b39a:function(e,t,n){var i=n("d3f4");e.exports=function(e,t){if(!i(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},c26b:function(e,t,n){"use strict";var i=n("86cc").f,r=n("2aeb"),a=n("dcbc"),o=n("9b43"),c=n("f605"),u=n("4a59"),s=n("01f9"),l=n("d53b"),d=n("7a56"),f=n("9e1e"),h=n("67ab").fastKey,p=n("b39a"),g=f?"_s":"size",v=function(e,t){var n,i=h(t);if("F"!==i)return e._i[i];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,s){var l=e((function(e,i){c(e,l,t,"_i"),e._t=t,e._i=r(null),e._f=void 0,e._l=void 0,e[g]=0,void 0!=i&&u(i,n,e[s],e)}));return a(l.prototype,{clear:function(){for(var e=p(this,t),n=e._i,i=e._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];e._f=e._l=void 0,e[g]=0},delete:function(e){var n=p(this,t),i=v(n,e);if(i){var r=i.n,a=i.p;delete n._i[i.i],i.r=!0,a&&(a.n=r),r&&(r.p=a),n._f==i&&(n._f=r),n._l==i&&(n._l=a),n[g]--}return!!i},forEach:function(e){p(this,t);var n,i=o(e,arguments.length>1?arguments[1]:void 0,3);while(n=n?n.n:this._f){i(n.v,n.k,this);while(n&&n.r)n=n.p}},has:function(e){return!!v(p(this,t),e)}}),f&&i(l.prototype,"size",{get:function(){return p(this,t)[g]}}),l},def:function(e,t,n){var i,r,a=v(e,t);return a?a.v=n:(e._l=a={i:r=h(t,!0),k:t,v:n,p:i=e._l,n:void 0,r:!1},e._f||(e._f=a),i&&(i.n=a),e[g]++,"F"!==r&&(e._i[r]=a)),e},getEntry:v,setStrong:function(e,t,n){s(e,t,(function(e,n){this._t=p(e,t),this._k=n,this._l=void 0}),(function(){var e=this,t=e._k,n=e._l;while(n&&n.r)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?l(0,"keys"==t?n.k:"values"==t?n.v:[n.k,n.v]):(e._t=void 0,l(1))}),n?"entries":"values",!n,!0),d(t)}}},d8bc:function(e,t,n){},e0b8:function(e,t,n){"use strict";var i=n("7726"),r=n("5ca1"),a=n("2aba"),o=n("dcbc"),c=n("67ab"),u=n("4a59"),s=n("f605"),l=n("d3f4"),d=n("79e5"),f=n("5cc5"),h=n("7f20"),p=n("5dbc");e.exports=function(e,t,n,g,v,m){var b=i[e],y=b,_=v?"set":"add",k=y&&y.prototype,C={},w=function(e){var t=k[e];a(k,e,"delete"==e||"has"==e?function(e){return!(m&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return m&&!l(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof y&&(m||k.forEach&&!d((function(){(new y).entries().next()})))){var E=new y,S=E[_](m?{}:-0,1)!=E,x=d((function(){E.has(1)})),O=f((function(e){new y(e)})),D=!m&&d((function(){var e=new y,t=5;while(t--)e[_](t,t);return!e.has(-0)}));O||(y=t((function(t,n){s(t,y,e);var i=p(new b,t,y);return void 0!=n&&u(n,v,i[_],i),i})),y.prototype=k,k.constructor=y),(x||D)&&(w("delete"),w("has"),v&&w("get")),(D||S)&&w(_),m&&k.clear&&delete k.clear}else y=g.getConstructor(t,e,v,_),o(y.prototype,n),c.NEED=!0;return h(y,e),C[e]=y,r(r.G+r.W+r.F*(y!=b),C),m||g.setStrong(y,e,v),y}},ecd9:function(e,t,n){},f400:function(e,t,n){"use strict";var i=n("c26b"),r=n("b39a"),a="Map";e.exports=n("e0b8")(a,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=i.getEntry(r(this,a),e);return t&&t.v},set:function(e,t){return i.def(r(this,a),0===e?0:e,t)}},i,!0)},fd95:function(e,t,n){"use strict";n("ac6a"),n("5df3"),n("f400");var i={data:function(){return{tableData:[],query:{sorting:"",skipCount:0,maxResultCount:10},pagination:{totalCount:0,pageIndex:0},sortMethodMap:new Map([["ascending","asc"],["descending","desc"]])}},methods:{getList:function(){throw new Error("您需要在您的组件中重写此方法。")},onPagination:function(e){var t=e.page;this.query.skipCount=(t-1)*this.query.maxResultCount,this.getList()},updateTotalCount:function(e){this.pagination.totalCount=e},dialogClose:function(e){e&&this.getList()},onSortChange:function(e){e.column;var t=e.prop,n=e.order;this.query.sorting=n?"".concat(t," ").concat(this.sortMethodMap.get(n)):"",this.getList()}}};t["a"]=i}}]);